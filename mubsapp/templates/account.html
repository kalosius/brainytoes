{% extends 'base.html' %}
{% block title %}Account Management{% endblock %}
{% block content %}

    <div class="container mx-auto mt-10">
        {% for message in messages %}
        <div id="message" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4">
            <strong class="font-bold">{{ message }}!</strong>
            <span id="close-message" class="absolute top-0 bottom-0 right-0 px-4 py-3">
                <svg class="fill-current h-6 w-6 text-green-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 5.652a1 1 0 10-1.414-1.414L10 7.172 7.066 4.238a1 1 0 10-1.414 1.414L8.586 10l-2.934 2.934a1 1 0 101.414 1.414L10 12.828l2.934 2.934a1 1 0 001.414-1.414L11.414 10l2.934-2.934z"/></svg>
            </span>
        </div>
        {% endfor %}  
                
       <center> <h1 style="font-size: 30px;">Manage Account</h1></center>
    </div>
   
    <div class="container mx-auto mt-10 px-4 sm:px-6 lg:px-8"> <!-- Added container class -->
        <!-- User Details -->
        <h2 class="text-2xl font-bold mb-4">User Details</h2>
        <form id="user-details-form" onsubmit="updateDetails(event)">
            <div class="mb-4">
                <label for="username" class="block text-gray-700">Username</label>
                <input type="text" id="username" name="username" class="border p-2 w-full" value="{{ user.username }}">
            </div>
            <div class="mb-4">
                <label for="email" class="block text-gray-700">Email</label>
                <input type="email" id="email" name="email" class="border p-2 w-full" value="{{ user.email }}">
            </div>
            <div class="mb-4">
                <label for="password" class="block text-gray-700">Password</label>
                <input type="password" id="password" name="password" class="border p-2 w-full">
            </div>
            <button type="submit" class="bg-blue-500 text-white p-2 mt-2">Update Details</button>
        </form>

    </div>

    <div class="container mx-auto mt-10 px-4 sm:px-6 lg:px-8"> <!-- Added container class -->
        <!-- Subscription Management -->
        <h2 class="text-2xl font-bold mb-4">Subscription Management</h2>
        <div class="mb-4">
            <label class="block text-gray-700">Current Plan</label>
            <p class="border p-2 w-full">{{ user.subscription.plan }}</p>
        </div>
        <div class="mb-4">
            <label class="block text-gray-700">Next Billing Date</label>
            <p class="border p-2 w-full">{{ user.subscription.next_billing_date }}</p>
        </div>
        <button onclick="manageSubscription()" class="bg-blue-500 text-white p-2 mt-2">Manage Subscription</button>
    </div>

    <div class="container mx-auto mt-10 px-4 sm:px-6 lg:px-8"> <!-- Added container class -->
        <!-- Other Account Settings -->
        <h2 class="text-2xl font-bold mb-4">Other Account Settings</h2>
        <button onclick="deleteAccount()" class="bg-red-500 text-white p-2 mt-2">Delete Account</button>
    </div>

    <script>
        function updateDetails(event) {
            event.preventDefault();
            // Implement details update logic here
            setTimeout(function() {
                document.getElementById('message').innerText = 'Details updated successfully.';
            }, 3000);
        }

        function manageSubscription() {
            // Implement subscription management logic here
            alert('Subscription management functionality to be implemented.');
        }

        function deleteAccount() {
            // Implement account deletion logic here
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                alert('Account deletion functionality to be implemented.');
            }
        }
    </script>

{% endblock %}